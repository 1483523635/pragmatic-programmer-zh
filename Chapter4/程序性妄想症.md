# 程序性妄想症
<!-- 2020.03.28 -->

---
## 提示 36 你写不出完美的软件
---

这会让你疼吗？不应该。 接受它作为生活的公理。 拥抱它。 庆祝它。 因为不存在完美的软件。 在计算机的简要历史中，没有人曾经编写过一款完美的软件。 您不太可能成为第一位。 除非您接受这一事实，否则最终您将浪费时间和精力去追求一个不可能实现的梦想。

那么，鉴于这个令人沮丧的现实，务实程序员如何将其变成优势？ 这就是本章的主题。

每个人都知道他们自己是地球上唯一的好司机。世界上其他地方都是为了得到他们，吹过停车标志，在车道间穿梭，不打指示灯转弯，在手机上发短信，而且一般都达不到我们的标准。因此，我们开车的时候都防守。我们会在麻烦发生之前就去寻找它们，预见到意外的事情，并且永远不要陷入无法自拔的境地。

与编码的类比非常明显。我们一直在与其他人的代码（可能不符合我们的高标准的代码）进行交互，并处理可能有效或无效的输入。因此，我们学会了防御性编码。如有任何疑问，我们将验证所获得的所有信息。我们使用断言来检测不良数据，并不信任来自潜在攻击者或坏的数据。我们检查一致性，在数据库列上设置约束，并且通常对自己感觉很好。

但是，实用编程人员将更进一步。他们也不信任自己。务实的程序员知道没人会写完美的代码，包括他们自己，所以会为自己的错误建立防御。我们在话题 23 [_契约式设计_](./契约式设计.md) 中描述了第一个防御措施：客户和供应商必须就权利和责任达成共识。

在话题 24 [_死程序不说谎_](./死程序不说谎.md)，我们希望确保在解决问题时不会造成任何损害。因此，我们尝试经常检查并在出现问题时终止程序。

话题 25 [_断言式编程_](./断言式编程.md) 描述了一种简单的检查方法-编写可主动验证您的假设的代码。

随着程序变得更加动态，您会发现自己在忙于利用系统资源（内存，文件，设备等）。在话题 26 [_如何平衡资源_](./如何平衡资源.md) 中，我们将建议确保您不会丢球的方法。

最重要的是，我们始终坚持小步骤，如话题 27 所述，[_别开过头了_](./别开过头了.md)，因此我们不会跌落悬崖边缘。

在不完善的系统，荒谬的时间尺度，可笑的工具和不可能的要求的世界中，请放心使用。正如伍迪·艾伦（Woody Allen）所说：“当每个人都真正想得到您时，妄想症就是一个好主意。"
