# 评估
<!-- 2020.03.17 -->

华盛顿特区的国会图书馆目前在线拥有大约75 TB的数字信息。快！通过1Gbps网络发送所有这些信息需要多长时间？一百万个名称和地址需要多少存储空间？压缩100Mb文本需要多长时间？交付项目需要多少个月？

一方面，这些都是毫无意义的问题，都是缺失的信息。但是，只要您能估计，就可以回答所有问题。而且，在进行估算的过程中，您将进一步了解程序所处的环境。

通过学习估算，并将此技能发展到对事物的大小具有直观感觉的程度，您将能够表现出明显的神奇能力来确定其可行性。当有人说“我们将通过网络连接将备份发送到S3”时，您将能够直观地知道这是否可行。在进行编码时，您将能够知道哪些子系统需要优化，哪些子系统可以单独放置。

---
## 提示 23 避免意外的估计
---

作为奖励，在这一部分的最后，我们将揭示一个正确的答案，无论何时有人要求你估计。

## 精确到什么程度？

在某种程度上，所有答案都是估计。 只是有些比其他的更准确。 因此，当有人要求您进行估算时，您必须问自己的第一个问题是答案的背景。 他们是否需要高精度，还是在寻找一个合适的数字？

估计有趣的事情之一是，您使用的单位会影响结果的解释。 如果您说某事大约需要130个工作日，那么人们会期望它很快就会到来。 但是，如果您说“哦，大约六个月”，那么他们知道从现在开始的五个到七个月之间的任何时间都将寻找它。 这两个数字表示相同的持续时间，但是“ 130天”可能意味着比您感觉的更高的准确性。 我们建议您按以下方式调整时间估算：

| 持续时间 | 报价估算 |
|:--:|:--:|
|1-15 天|天|
|3-6 周|周|
|8-20 周|月|
|20 周以上|在给出估计之前要认真思考|

因此，如果在完成所有必要的工作后，您决定一个项目将花费125个工作日（25周），那么您可能希望提供“大约六个月”的估计。
相同的概念适用于任何数量的估计：选择答案的单位以反映要传达的准确性。

## 估算值从何而来？

所有估计均基于问题的模型。 但是，在我们深入研究构建模型的技术之前，我们必须提到一个基本的估算技巧，该技巧总是能给出很好的答案：问一个已经做过的人。 在您过分致力于模型构建之前，请赶快过去曾经经历过类似情况的人。 看看他们的问题是如何解决的。 您不太可能会找到完全匹配的内容，但您会惊讶地发现有多少次可以成功借鉴他人的经验。

## 明白别人在问什么

估算工作的第一部分是建立对要求的理解。 除了上面讨论的准确性问题之外，您还需要掌握域的范围。 通常这在问题中是隐含的，但是您需要养成习惯，在开始猜测之前先考虑一下范围。 通常情况下，您选择的范围将构成您给出的答案的一部分：“假设没有交通事故并且车内有汽油，我应该在20分钟之内到达。”

## 建立系统模型

这是估计的有趣部分。从您对所问问题的理解中，构建一个粗糙而现成的准系统心智模型。如果您估计响应时间，则您的模型可能涉及服务器和某种到达流量。对于项目，模型可能是组织在开发过程中使用的步骤，以及有关如何实现系统的非常粗略的描述。

从长远来看，模型构建既有创意又有用。通常，建立模型的过程会导致发现表面上不明显的潜在模式和过程。您甚至可能想重新检查最初的问题：“您要求对X进行估算。但是，看起来像 X 的变体 Y 可以在大约一半的时间内完成，而您仅损失一项功能。”

建立模型会在估算过程中引入误差。这是不可避免的，也是有益的。您需要权衡模型的简单性和准确性。将模型上的工作量加倍可能只会使准确性略有提高。您的经验将告诉您何时停止精炼。

## 将模型分解为组件

一旦有了模型，就可以将其分解为组件。 您需要发现描述这些组件如何相互作用的数学规则。 有时，组件会贡献一个添加到结果中的值。 一些组件可能会提供乘数，而其他组件可能会更复杂（例如，模拟流量到达节点的组件）。
您会发现每个组件通常都具有影响其对整体模型的贡献方式的参数。 在此阶段，只需识别每个参数。

## 给每个参数一个值

分解完参数后，可以遍历并为每个参数分配一个值。您希望在此步骤中引入一些错误。诀窍是弄清楚哪些参数对结果影响最大，并集中精力使参数正确无误。通常，将其值添加到结果中的参数的重要性不如乘或除的参数重要。将线路速度提高一倍可能会使一小时内接收到的数据量增加一倍，而增加5ms的传输延迟将不会产生明显的影响。

您应该有合理的方法来计算这些关键参数。对于排队示例，您可能想要测量现有系统的实际交易到达率，或者找到一个类似的系统进行测量。同样，您可以使用本节中介绍的技术来衡量当前服务请求所花费的时间，或得出一个估算值。实际上，您经常会发现自己是根据其他估算值进行估算的。这是最大的错误将蔓延的地方。

## 计算答案

估计仅在最简单的情况下才会有一个答案。 您可能会高兴地说：“我可以在15分钟内步行五个跨镇街区。” 但是，随着系统变得越来越复杂，您将需要对冲您的答案。 运行多次计算，改变关键参数的值，直到确定哪些因素真正驱动了模型。 电子表格可以提供很大帮助。 然后根据这些参数提出您的答案。 “如果系统具有SSD和32GB内存，则响应时间约为四分之三秒，而具有16GB内存则为一秒钟。” （请注意，“四分之三秒”所传达的准确性与750ms有所不同。）

在计算阶段，您可能会开始获得看起来很奇怪的答案。 不要太快就解雇他们。 如果您的算术是正确的，那么您对问题或模型的理解可能是错误的。 这是有价值的信息。

## 跟踪您的估算能力

我们认为记录您的估算值是一个好主意，这样您就可以了解您的估算值。 如果总体估算涉及计算子估算，则也要跟踪这些估算。 通常，您会发现自己的估算值是非常不错的-实际上，过了一会儿，您就会对此有所期待。

如果估算结果有误，请不要耸耸肩走开。 找出为什么它与您的猜测不同。 也许您选择的参数与问题的实际情况不符。 也许您的模型是错误的。 不管是什么原因，请花一些时间来了解发生了什么。 如果这样做，您的下一个估计会更好。

## 估算项目进度

面对大型应用程序开发的复杂性和变数，估算的正常规则可能会崩溃。 我们发现，确定项目时间表的唯一途径通常是在同一个项目上获得经验。 如果您练习渐进式开发，请重复以下步骤，这不必是矛盾的。

- 检查要求
- 分析风险
- 设计，实施，集成
- 验证用户身份

最初，您可能只不清楚需要多少次迭代，或者可能需要多长时间。 有些方法要求您将其确定为初始计划的一部分，但是对于除最琐碎的项目之外的所有项目，这都是一个错误。 除非您使用相同的团队和相同的技术来执行与上一个应用程序类似的应用程序，否则您只是在猜测。

因此，您完成了对初始功能的编码和测试，并将其标记为第一次迭代的结束。 基于该经验，您可以对迭代次数以及每个迭代中可以包含的内容进行优化。 每次的改进都越来越好，对进度的信心也随之增加。 这种估算通常是在每个迭代周期结束时，在小组审核期间进行的。

---
## 提示  24 用代码迭代计划表
---

这在管理人员中可能并不流行，他们通常在项目开始之前就需要一个固定的数字。 您必须帮助他们了解团队，他们的生产力和环境将决定时间表。 通过对此进行形式化并在每次迭代中完善计划，您将为他们提供最准确的计划估算值。

## 当被要求估价时该说什么

您说：“我会尽快回复您。”
如果您减慢流程速度并花一些时间来完成我们在本节中介绍的步骤，则几乎总是可以获得更好的结果。 咖啡机提供的估算值（像咖啡一样）会再次困扰您。

## 相关内容包括

- 话题 39 [算法速度](../Chapter7/算法速度.md)
- 话题  7 [沟通](../Chapter1/沟通.md)

## 挑战

- 开始记录您的估算值。 对于每一个，跟踪您原来的准确性。 如果您的错误大于50％，请尝试找出估计错误的地方。

## 练习

### 练习 9（尽可能回答）

    您会被问到“哪个带宽更高：一个1Gbps的网络连接或一个人在口袋里装满1TB存储设备的两台计算机之间行走？”您将对答案施加什么限制以确保响应范围 是正确的？ （例如，您可能会说访问存储设备所花费的时间被忽略了。）

### 练习 10（尽可能回答）

    那么，哪个具有更高的带宽？
